name: Workflow

on:
   push:
     branches:
       - master
       - 'release/*'
   pull_request:

jobs:

  Build:
    name: Build
    runs-on: ubuntu-20.04
    strategy:
      fail-fast: false
      matrix:
        distro: [centos.7, leap.15, ubuntu.20.04]
    steps:
    - uses: actions/checkout@v2
      with:
        submodules: true
    - name: Build Docker image
      run: docker build . -f utils/docker/Dockerfile.${{ matrix.distro }} -t ${{ matrix.distro }}/daos:${{ github.sha }}
