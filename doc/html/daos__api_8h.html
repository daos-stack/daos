<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DAOS API: src/include/daos_api.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="daos_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DAOS API
   &#160;<span id="projectnumber">DAOS v1.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('daos__api_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">daos_api.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="daos__api_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a06fc87d81c62e9abb8790b6e5713c55b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="daos__api_8h.html#a06fc87d81c62e9abb8790b6e5713c55baeca54c80ace170328bff03179c070de7">DAOS_TF_RDONLY</a> = (1 &lt;&lt; 0), 
<a class="el" href="daos__api_8h.html#a06fc87d81c62e9abb8790b6e5713c55baec4d2d2d242c35e0e858fb2a5dad6e15">DAOS_TF_ZERO_COPY</a> = (1 &lt;&lt; 1)
 }</td></tr>
<tr class="separator:a06fc87d81c62e9abb8790b6e5713c55b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abc4655c8429eff6b7a5637027ec3dbb2"><td class="memItemLeft" align="right" valign="top">d_rank_list_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daos__api_8h.html#abc4655c8429eff6b7a5637027ec3dbb2">daos_rank_list_parse</a> (const char *str, const char *sep)</td></tr>
<tr class="separator:abc4655c8429eff6b7a5637027ec3dbb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85fc0f9f93c742cfa39b65ac71c9ec07"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daos__api_8h.html#a85fc0f9f93c742cfa39b65ac71c9ec07">daos_tx_open</a> (<a class="el" href="structdaos__handle__t.html">daos_handle_t</a> coh, <a class="el" href="structdaos__handle__t.html">daos_handle_t</a> *th, uint64_t flags, <a class="el" href="structdaos__event.html">daos_event_t</a> *ev)</td></tr>
<tr class="separator:a85fc0f9f93c742cfa39b65ac71c9ec07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cb7e867cfd999985945c5d5e4fedac3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daos__api_8h.html#a4cb7e867cfd999985945c5d5e4fedac3">daos_tx_commit</a> (<a class="el" href="structdaos__handle__t.html">daos_handle_t</a> th, <a class="el" href="structdaos__event.html">daos_event_t</a> *ev)</td></tr>
<tr class="separator:a4cb7e867cfd999985945c5d5e4fedac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeed38f424e4808a8343899d650339b3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daos__api_8h.html#aeeed38f424e4808a8343899d650339b3">daos_tx_open_snap</a> (<a class="el" href="structdaos__handle__t.html">daos_handle_t</a> coh, daos_epoch_t epoch, <a class="el" href="structdaos__handle__t.html">daos_handle_t</a> *th, <a class="el" href="structdaos__event.html">daos_event_t</a> *ev)</td></tr>
<tr class="separator:aeeed38f424e4808a8343899d650339b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40cf0b9f0976d3173d55b2bce33a91f8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daos__api_8h.html#a40cf0b9f0976d3173d55b2bce33a91f8">daos_tx_abort</a> (<a class="el" href="structdaos__handle__t.html">daos_handle_t</a> th, <a class="el" href="structdaos__event.html">daos_event_t</a> *ev)</td></tr>
<tr class="separator:a40cf0b9f0976d3173d55b2bce33a91f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc1b2d05cbf0cb9ed6a4dc843d97fb82"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daos__api_8h.html#acc1b2d05cbf0cb9ed6a4dc843d97fb82">daos_tx_close</a> (<a class="el" href="structdaos__handle__t.html">daos_handle_t</a> th, <a class="el" href="structdaos__event.html">daos_event_t</a> *ev)</td></tr>
<tr class="separator:acc1b2d05cbf0cb9ed6a4dc843d97fb82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcc4cc9d5c82aae3be3a3076bcb7e9e1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daos__api_8h.html#abcc4cc9d5c82aae3be3a3076bcb7e9e1">daos_tx_restart</a> (<a class="el" href="structdaos__handle__t.html">daos_handle_t</a> th, <a class="el" href="structdaos__event.html">daos_event_t</a> *ev)</td></tr>
<tr class="separator:abcc4cc9d5c82aae3be3a3076bcb7e9e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a50870fb708e8044d112a8ec7af5100"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daos__api_8h.html#a3a50870fb708e8044d112a8ec7af5100">daos_tx_hdl2epoch</a> (<a class="el" href="structdaos__handle__t.html">daos_handle_t</a> th, daos_epoch_t *epoch)</td></tr>
<tr class="separator:a3a50870fb708e8044d112a8ec7af5100"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>DAOS API methods </p>

<p class="definition">Definition in file <a class="el" href="daos__api_8h_source.html">daos_api.h</a>.</p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a06fc87d81c62e9abb8790b6e5713c55b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06fc87d81c62e9abb8790b6e5713c55b">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flags for daos_tx_open </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a06fc87d81c62e9abb8790b6e5713c55baeca54c80ace170328bff03179c070de7"></a>DAOS_TF_RDONLY&#160;</td><td class="fielddoc"><p>The transaction is read only. </p>
</td></tr>
<tr><td class="fieldname"><a id="a06fc87d81c62e9abb8790b6e5713c55baec4d2d2d242c35e0e858fb2a5dad6e15"></a>DAOS_TF_ZERO_COPY&#160;</td><td class="fielddoc"><p>Do not copy caller data buffers during modifications associated with the transaction. The buffers must remain unchanged until the daos_tx_commit operation for the transaction completes.</p>
<p>Key buffers are always copied, regardless of this flag. They can be released or repurposed after corresponding operations complete. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="daos__api_8h_source.html#l00020">20</a> of file <a class="el" href="daos__api_8h_source.html">daos_api.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abc4655c8429eff6b7a5637027ec3dbb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc4655c8429eff6b7a5637027ec3dbb2">&#9670;&nbsp;</a></span>daos_rank_list_parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">d_rank_list_t* daos_rank_list_parse </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate a rank list from a string with a separator argument. This is a convenience function to generate the rank list required by daos_pool_connect().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">str</td><td>string with the rank list </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sep</td><td>separator of the ranks in <em>str</em>. dmg uses ":" as the separator.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>allocated rank list that user is responsible to free with d_rank_list_free(). </dd></dl>

</div>
</div>
<a id="a40cf0b9f0976d3173d55b2bce33a91f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40cf0b9f0976d3173d55b2bce33a91f8">&#9670;&nbsp;</a></span>daos_tx_abort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int daos_tx_abort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdaos__handle__t.html">daos_handle_t</a>&#160;</td>
          <td class="paramname"><em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdaos__event.html">daos_event_t</a> *&#160;</td>
          <td class="paramname"><em>ev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Abort all modifications on the transaction. The transaction handle cannot be used for any new IO.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">th</td><td>Transaction handle to abort. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ev</td><td>Completion event, it is optional and can be NULL. The function will run in blocking mode if <em>ev</em> is NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if Success, negative if failed. </dd></dl>

</div>
</div>
<a id="acc1b2d05cbf0cb9ed6a4dc843d97fb82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc1b2d05cbf0cb9ed6a4dc843d97fb82">&#9670;&nbsp;</a></span>daos_tx_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int daos_tx_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdaos__handle__t.html">daos_handle_t</a>&#160;</td>
          <td class="paramname"><em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdaos__event.html">daos_event_t</a> *&#160;</td>
          <td class="paramname"><em>ev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the transaction handle. This is a local operation, no RPC involved.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">th</td><td>Transaction handle to free. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ev</td><td>Completion event, it is optional and can be NULL. The function will run in blocking mode if <em>ev</em> is NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if Success, negative if failed. </dd></dl>

</div>
</div>
<a id="a4cb7e867cfd999985945c5d5e4fedac3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cb7e867cfd999985945c5d5e4fedac3">&#9670;&nbsp;</a></span>daos_tx_commit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int daos_tx_commit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdaos__handle__t.html">daos_handle_t</a>&#160;</td>
          <td class="paramname"><em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdaos__event.html">daos_event_t</a> *&#160;</td>
          <td class="paramname"><em>ev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Commit the transaction. If the operation succeeds, the transaction handle cannot be used for any new IO. If -DER_TX_RESTART is returned, the caller needs to restart the transaction with the same transaction handle, by calling daos_tx_restart, re-executing the caller code for this transaction, and calling daos_tx_commit again.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">th</td><td>Transaction handle to commit. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ev</td><td>Completion event, it is optional and can be NULL. The function will run in blocking mode if <em>ev</em> is NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if Success, negative if failed. Possible error values include: -DER_NO_HDL invalid transaction handle. -DER_INVAL Invalid parameter -DER_TX_RESTART transaction needs to restart (e.g., due to conflicts). </dd></dl>

</div>
</div>
<a id="a3a50870fb708e8044d112a8ec7af5100"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a50870fb708e8044d112a8ec7af5100">&#9670;&nbsp;</a></span>daos_tx_hdl2epoch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int daos_tx_hdl2epoch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdaos__handle__t.html">daos_handle_t</a>&#160;</td>
          <td class="paramname"><em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">daos_epoch_t *&#160;</td>
          <td class="paramname"><em>epoch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the epoch associated with the transaction handle. An epoch may not be available at the beginning of the transaction, but one shall be available after the transaction successfully commits.</p>
<p>This function is specific to the current implementation. It should only be used for testing and debugging purposes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">th</td><td>Transaction handle. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">epoch</td><td>Returned epoch value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if Success, negative if failed. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-DER_UNINIT</td><td>An epoch is not available yet. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a85fc0f9f93c742cfa39b65ac71c9ec07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85fc0f9f93c742cfa39b65ac71c9ec07">&#9670;&nbsp;</a></span>daos_tx_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int daos_tx_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdaos__handle__t.html">daos_handle_t</a>&#160;</td>
          <td class="paramname"><em>coh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdaos__handle__t.html">daos_handle_t</a> *&#160;</td>
          <td class="paramname"><em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdaos__event.html">daos_event_t</a> *&#160;</td>
          <td class="paramname"><em>ev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open a transaction on a container handle. The resulting transaction handle can be used for IOs in this container that need to be committed transactionally.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">coh</td><td>Container handle. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">th</td><td>Returned transaction handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Transaction flags (DAOS_TF_RDONLY, etc.). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ev</td><td>Completion event, it is optional and can be NULL. The function will run in blocking mode if <em>ev</em> is NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if Success, negative if failed. </dd></dl>

</div>
</div>
<a id="aeeed38f424e4808a8343899d650339b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeeed38f424e4808a8343899d650339b3">&#9670;&nbsp;</a></span>daos_tx_open_snap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int daos_tx_open_snap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdaos__handle__t.html">daos_handle_t</a>&#160;</td>
          <td class="paramname"><em>coh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">daos_epoch_t&#160;</td>
          <td class="paramname"><em>epoch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdaos__handle__t.html">daos_handle_t</a> *&#160;</td>
          <td class="paramname"><em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdaos__event.html">daos_event_t</a> *&#160;</td>
          <td class="paramname"><em>ev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a read-only transaction from a snapshot. This does not create the snapshot, but only a read transaction to be able to read from a snapshot created with daos_cont_create_snap. If the user passes an epoch that is not snapshoted, or the snapshot was deleted, reads using that transaction may get undefined results.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">coh</td><td>Container handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">epoch</td><td>Epoch of snapshot to read from. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">th</td><td>Returned read only transaction handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ev</td><td>Completion event, it is optional and can be NULL. The function will run in blocking mode if <em>ev</em> is NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if Success, negative if failed. </dd></dl>

</div>
</div>
<a id="abcc4cc9d5c82aae3be3a3076bcb7e9e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcc4cc9d5c82aae3be3a3076bcb7e9e1">&#9670;&nbsp;</a></span>daos_tx_restart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int daos_tx_restart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdaos__handle__t.html">daos_handle_t</a>&#160;</td>
          <td class="paramname"><em>th</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdaos__event.html">daos_event_t</a> *&#160;</td>
          <td class="paramname"><em>ev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Restart the transaction after encountering a -DER_TX_RESTART error. This drops all the IOs that have been issued via the transaction handle. Whether the restarted transaction observes any conflicting modifications committed after this transaction was originally opened is undefined. If callers would like to retry transactions for their own purposes, they shall open new transactions instead. This is a local operation, no RPC involved.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">th</td><td>Transaction handle to be restarted. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ev</td><td>Completion event, it is optional and can be NULL. The function will run in blocking mode if <em>ev</em> is NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if Success, negative if failed. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b0856f6b0d80ccb263b2f415c91f9e17.html">include</a></li><li class="navelem"><a class="el" href="daos__api_8h.html">daos_api.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
