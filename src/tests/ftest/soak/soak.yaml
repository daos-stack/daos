hosts:
    test_servers:
        - boro-A
        - boro-B
        - boro-C
        - boro-D
    test_clients:
        - boro-E
        - boro-F
        - boro-G
        - boro-H
        - boro-I
        - boro-J
        - boro-K
        - boro-L
timeout: 7200
logdir: /tmp/soak
server_config:
    name: daos_server
#slurm partition names
partition:
    name: daos_client
# pool_params - attributes of the pools to create; Currently only create one
pool:
    mode: 146
    name: daos_server
    scm_size: 100000000000
    svcn: 1
# test_params - Defines the type of test to run and how long it runs
#               It also defines how many pools and jobs to create
#               name:                The name of the Avocado testcase
#               test_timeout:        The overall timeout in secs; soak12 will be
#                                    changed to 43200 once it is stable
#               test_iteration:      values 1 or -1; -1 is used to cause the
#                                    IOR -T x to end cmd.  i = 100000000
#                                    (does not seem to work)
#               nodesperjob:         slurm -N param; -1 indicates all nodes
#                                    in -partition
#               poollist:            defines pools to create for jobs
#               joblist:             defines workload per slurm scripts
# smoke testcase params
smoke:
    name: smoke
    test_timeout: 1800
    test_iteration: 1
    nodesperjob: -1
    pool: pool1
    joblist:
      - jobsmoke
# 1 hours testcase params
soak1:
    name: soak1
    test_timeout: 3600
    test_iteration: 5
    nodesperjob: 1
    pool: pool1
    joblist:
      - job1
      - job16
      - job24
# job_params  - defines the job specifications for each cmdline listed
#               name:                The name of the Avocado testcase
#               time:                The IOR cmdline timeout; passed to slurm
#               tasks:               slurm --ntaskspernode param
#               blocksize:           IOR blocksize; need to consider poolsize
#                                    and total ntasks (nodes * ntaskspernode)
#                                    This param will be determined in the
#                                    test later.
#               jobspec:             list of cmdline specifications to run
# smoke job params; all nodes on client partition are used and one taskpernode
jobsmoke:
    name: smoke
    time: 10
    tasks: 1
    blocksize: '64M'
    jobspec:
        - ior_daos_4k_large
        - ior_daos_128k_large
        - ior_daos_1m_large
        - ior_mpiio_4k_tiny
        - ior_mpiio_128k_large
        - ior_mpiio_1m_large
# task = 1
job1:
    name: job1
    time: 10
    tasks: 1
    blocksize: '64M'
    jobspec:
        - ior_daos_4k_large
        - ior_daos_128k_large
        - ior_daos_1m_large
        - ior_mpiio_4k_tiny
        - ior_mpiio_128k_large
        - ior_mpiio_1m_large
# task = 16
job16:
    name: job16
    time: 20
    tasks: 16
    blocksize: '64M'
    jobspec:
        - ior_daos_4k_large
        - ior_daos_128k_large
        - ior_daos_1m_large
        - ior_mpiio_4k_tiny
        - ior_mpiio_128k_large
        - ior_mpiio_1m_large
# tasks 32 is failing - DAOS-2518
# task = 24
job24:
    name: job24
    time: 30
    tasks: 24
    blocksize: '64M'
    jobspec:
        - ior_daos_4k_large
        - ior_daos_128k_large
        - ior_daos_1m_large
        - ior_mpiio_4k_tiny
        - ior_mpiio_128k_large
        - ior_mpiio_1m_large
# TBD test case for DMG
job2:
    name: pool_job_3
    time: 600
    partition: client
    jobspec:
        - dmg1
# IOR params -a DAOS and -a MPIIO
# sequential
ior_daos_4k_large:
    api: DAOS
    flags: -v -w -W -r -R
    transfer_size: 4k
    daos_oclass: SX
ior_daos_128k_large:
    api: DAOS
    flags: -v -w -W -r -R
    transfer_size: 128k
    daos_oclass: SX
# random
ior_daos_1m_large:
    api: DAOS
    flags: -v -w -W -r -R
    transfer_size: 1m
    daos_oclass: SX
# IOR MPIIO cmdlines  - TBD
ior_mpiio_4k_tiny:
    api: MPIIO
    flags: -v -w -W -r -R
    transfer_size: 4k
    daos_oclass: S1
ior_mpiio_128k_large:
    api: MPIIO
    flags: -v -w -W -r -R
    transfer_size: 128k
    daos_oclass: SX
ior_mpiio_1m_large:
    api: MPIIO
    flags: -v -w -W -r -R
    transfer_size: 1m
    daos_oclass: SX
# dmg cmdline params - TBD
dmg1:
    commands:
        - cmd: "create"
          params: "--size 10M"
        - cmd: "create"
          params: "--size 11M"
        - cmd: "create"
          params: "--size 14M"
        - cmd: "create"
          params: "--size 15M"
