ENV:
  default:
    - D_LOG_MASK: "INFO"
    - D_INTERFACE: "eth0"
env_D_PROVIDER:
  ofi_tcp:
    D_PROVIDER: "ofi+tcp"
timeout: 120
hosts:
  hosts_1:
    config: one_node
    test_servers: server-1
    test_clients: server-1
tests: !mux
  bulk_fwd_basic:
    name: bulk_fwd_basic
    test_servers_bin: crt_launch
    test_servers_arg: "-e test_group_np_srv --name fwd_test_grp"
    test_servers_env: "-x CRT_TIMEOUT=10"
    test_servers_ppn: "2"
    test_clients_bin:
      - test_group_np_cli
      - test_group_np_cli
    test_clients_arg:
      - " --name client_group --attach_to fwd_test_grp --rank=0 --bulk_forward=1 --skip_shutdown --skip_check_in"
      - " --name client_group --attach_to fwd_test_grp --shut_only"
    test_clients_env: "-x CRT_TIMEOUT=10"
    test_clients_ppn: "1"
  bulk_fwd_64k:
    name: bulk_fwd_64k
    test_servers_bin: crt_launch
    test_servers_arg: "-e test_group_np_srv --name fwd_test_grp2"
    test_servers_env: "-x CRT_TIMEOUT=10"
    test_servers_ppn: "2"
    test_clients_bin:
      - test_group_np_cli
      - test_group_np_cli
    test_clients_arg:
      - " --name client_group --attach_to fwd_test_grp2 --rank=0 --bulk_forward=1 --skip_shutdown --skip_check_in -x 65536 -y 10"
      - " --name client_group --attach_to fwd_test_grp2 --shut_only"
    test_clients_env: "-x CRT_TIMEOUT=10"
    test_clients_ppn: "1"
